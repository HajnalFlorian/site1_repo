<!DOCTYPE html>
<html>
<head>
	<title>Suite cours - HTTP Request</title>
	<meta charset="utf-8">
</head>
<body>

	<h1>HTTP Request</h1>

<hr>
	Informations :
	<ul>
		<li>On récupère un fichier .xml grâce à une requête HTTP.</li>
		<li>L'objectif est d'afficher le contenu de l'xml dans la page appelante.</li>
		<li>En utilisant la variable xhttp</li>
		<li>Pour créer un objet XMLHttpRequest : "var xhttp = new XMLHttpRequest();"</li>
		<li>La propriété readyState contient le statut de l’objet xhttp créé</li>
		<li>L’événement onreadystatechange est déclenché chaque fois que readyState change</li>
		<li>Lors d'une demande de serveur, le readyState passe de 0 à 4:
			<ul>
				<li>0: demande non initialisée</li>
				<li>1: connexion au serveur établie</li>
				<li>2: demande reçue</li>
				<li>3: demande de traitement</li>
				<li>4: demander fini et la réponse est prête</li>
			</ul>
		</li>
		<li>Statut 200 : OK ; Statut 404 : ressource non trouvée.</li>
		<li>La méthode open (sans argument pour un GET).</li>
		<li>La méthode GET est plus simple que POST et utilisable dans la plupart des cas.</li>
		<li>L'URL - un fichier sur un serveur</li>
		<li>les pages html et les fichiers web doivent être sur le même serveur.</li>
		<li>Le dernier paramètre permet de définir si async ou non (executer des taches de fond, ne pas attendre de réponse du serveur)</li>

	</ul>

<hr>
<!-- Conteneur qui recevra le résultat de la requête -->
<div id="conteneur_requete"></div>

<!-- Bouton qui lance la méthode de chargement du xml -->
<button onclick="GetXml();">Lancement du chargement du xml</button>


<script type="text/javascript">

    function GetXml()
    {
        //Récupère le conteneur
        var conteneur = document.getElementById('conteneur_requete');
        
        //Déclaration de l'objet xhttp
        var xhttp = new XMLHttpRequest();

        xhttp.onreadystatechange = function() 
        {
            if (this.readyState == 4 && this.status == 200) 
            {
                console.log("Chargment terminé.");
                conteneur.innerHTML = xhttp.responseText;
            }
        };
        
        xhttp.open("GET", "etudiants.xml", true);
        xhttp.send(); 

    }

</script>

</body>
</html>